language: java

services:
    - mysql

before_install:
    - echo "Configuring build."
    #Change into directory where pom.xml is located
    - cd LSDProjectBackend
    #Change mysql password to match local development config (from travis docs)
    - sudo mysql -e "use mysql; update user set authentication_string=PASSWORD('root') where User='root'; update user set plugin='mysql_native_password';FLUSH PRIVILEGES;"
    #Print password to see difference
    - sudo mysql -e "SELECT PASSWORD('root') AS correctPass, mysql.user.* FROM mysql.user WHERE mysql.user.User = 'root';"
    # Disabled because it shouldn't be necessary
    #- sudo mysql_upgrade -u "root" -p "root"
    - sudo service mysql restart
